# Big-homework

详情见 【大作业报告.docx】，以下为不完全粘贴版本。


Windows C#程 序 设 计 专 题 

大 程 序 报 告

1、	题目
Online Shopping System for furniture 家具网上购物系统
（具体说明见下方）
2、	需求分析
不同的家具因其材质、设计等方面的不同，生产与销售的地区也不同。若想要参观、购买其他地区的家具产品，则要花费高昂的路费和较长的时间远赴外地进行选购，于是，家具网上购物系统应运而生。在这个在线购物系统上，人们可以在坐在电脑前购买全国各个地区不同的家具产品。他们只需要点击产品，在线支付，然后在一两天内等待包裹的交付。
以下是该平台目前还未能实现的计划：
	新增“人人都是家具体验员”功能。
网站上的买家用户对家具进行线下体验或者线上购买之后，都会得到一个邀请码，通过该邀请码验证身份才能在网站上发表对该家具产品的评论，并权衡家具各方面的功能、性价比等进行打分。线上购买该家具的用户，还可以对该家具已有的评论进行点赞操作。网站会依据该家具产品的购买数、评论的打分和点赞进行加权平均计算得到该产品的优先级，根据优先级决定所有产品在页面上出现的先后顺序。通过这一机制，不但扩大了对产品评价的人数，增加了用户的体验感和网站的知名度，而且挑选出真正为用户所喜爱的、物美价廉的产品。
	“私人定制”功能。
网站将会提供数种家具模板，用户通过简便的选择之后，即可看到网站呈现的效果图预览，若满意，即可下单购买；若不满意，可以调整家具模板中的元素继续选购。若家具模板中没有理想款，也可联系设计师来提供定制设计。通过这一功能，用户可以得到“独一无二”的满意家具。
3、总体设计
3.1 功能模块设计
概述：
前端：Big-homework项目的aspx，css和js文件，分为登录，注册，购物车，订单历史，浏览商品，示例商品，上传商品，管理商品，管理用户等几个模块。
后端：cs文件，包括商品，用户，购物车，订单，通用支持五个部分。
前端发送信息给后端程序，后端程序处理后返回值发送给前端。中间的交互用的是JSON格式的字符串，这样可以大大方便处理。

详述：
	网站上的商品分类成“卧室”“浴室”“客厅”“厨房”“书房”“商家上传的”六大类，“所有”为主界面，其中以“卧室”界面为例（其余界面未设置链接）。
	每个大类按照家具类型分为几小类，点击不同小类的链接会筛选指定商品。如“卧室”分为“床”和“衣柜”两小类，点击“衣柜”后商品自动筛选为只剩衣柜类家具（仍以“卧室”为例，其余界面未设置链接）。
	在“卧室|床”界面中，可浏览各种商品，点击“添加到购物车”按钮即可添加到购物车；点击“查看详情”按钮进入商品详情页，这里以“KOPARDAL 科帕达 床架”为例（其余商品未设置详情页）。
	网址有登录和注册功能。网站的注册功能会检验邮箱地址的格式、两次密码输入是否相同、所使用的电子邮箱的唯一性。网站的登录功能会检验邮箱地址是否存在、密码是否输入正确；其中若勾选“记住我”，在用户未退出账户的前提下，关闭浏览器再次打开后仍能保持登录状态。
	网站使用者可选择注册为买家或注册为卖家；网站的管理员唯一账号为：邮箱地址000@000.com 密码000。
	网址的主要用户分为管理员、卖家和买家三者。不同身份的用户操作权限不同。总的来说，操作权限：管理员>卖家>买家。
	买家的操作权限：浏览商品、添加到购物车、从购物车中移除商品、支付、查看订单历史、查看购物车、退出登录。
	卖家的操作权限：浏览商品、添加到购物车、从购物车中移除商品、支付、查看订单历史、查看购物车、退出登录、上传商品、管理商品。
	管理员的操作权限：浏览商品、添加到购物车、从购物车中移除商品、支付、查看订单历史、查看购物车、退出登录、上传商品、管理商品、管理用户。
 
   
	满足大作业所有要求。
1.菜单功能： 
“所有”界面的六色面板；
 
每个界面上方第二栏的导航栏；
 
“卧室”界面导航栏
  
2.图标工具栏：
商品分类的下拉菜单；
 
3.快捷键：
个人中心下拉菜单中的功能设置的快捷键；
    
未登录状态 买家（1） 卖家（2）  管理员（3）
4.状态信息栏
在当前窗口底部显示页面加载状态；
 
5.管理员功能： 即管理员（3）
6.操作员功能： 即卖家（2）
7.顾客功能： 即买家（1）
8.统计功能： 
购物车上不同时间段添加的相同物品统计其数量；
 
商品的库存动态统计功能；
 
9.用数据库存储信息。
3.2 数据结构设计
主要采用数据库。以下是“数据库表格设计”的描述（有一些没有体现到最终的网站上😐）： 
User
字段名	注释
ID	用户标号
Type	用户类别（管理员or卖家or买家）
Name	用户名
Password	加密的登陆密码
Phone	手机号
Email	邮箱
Rank	等级
Coin	虚拟币
Paid_Coin	已抵用虚拟币

Product
字段名	注释
ID	产品标号
Name	产品名
Type	产品所属类别
Price	产品价格
Count	已购数量
Detail_ID	详细信息页ID
Details	产品的细节描述

ProductDetail
字段名	注释
ID	详细信息页的ID
Cover	产品的封面图片

Shopcart
字段名	注释
ID	购物车标号
User_ID	用户标号
Product_ID	产品标号
Number	产品数量

Orders
字段名	注释
ID	订单标号
User_ID	用户标号
Shopcart_Ornot	提交购物车与否
Shopcart_ID	购物车标号
Product_ID	产品标号
Number	产品数量
Date	订单时间
Status	订单状态（未支付Unpaid or 已支付Paid）
Name	收件人姓名
Phone	收件人电话
Address	收件人地址


3.3 函数功能描述
因为函数很多，这里只把一些典型的函数放上来
 
注册函数，进行了对电子邮件和密码格式的检查，并且弹框提示，之后自动转到登录。
 
购买商品函数，可以重复使用SQL连接，还会更新订单历史。
 
上传商品函数，因为一次执行的操作太多，这里使用了SQL的事务模式，防止中途出错。
3.4 程序文件结构
3.4.1文件函数结构
 
 
 
 
	页面使用带有母版页的Web窗体，可以减少代码量，降低重复工作。
	同时编写了部分JS和CSS代码，可以让浏览器和服务器合理分工，令页面更好看。
	Proc项目是项目后端的处理文件，作用是复杂数据的处理和与数据库的交互。
	数据库用的是网上的服务器，所以一定要联网才能用😁，好处就是不用自己下载数据库软件什么的。
3.4.2多文件构成机制
	Aspx是页面的主体，css和js都可以改变aspx的行为和显示效果。
	最后数据都要传送给c#，然后再与数据库交互。
4.部署与运行
4.1编译安装运行说明
Default.aspx文件是首页，打开它然后运行就行。亲测用visual studio2017和Chrome、Firefox、IE浏览器联网打开皆可正常运行。
4.2典型测试情况
Javascript文件由于与VS集成度不够高，因此测试不方便。这里用了firefox的F12开发者功能的调试器，可以方便地下断点，并且看各项数据。
5.总结
5.1程序亮点或创新之处
	界面设计采用bootstrap，力求界面美观。
	合理运用了css和js，提升显示效果。
	运用数据库技术，简化编写。
	多个页面合理分工，程序架构清晰。
5.2应用知识点
C#的语法，静态方法，与状态无关的设计模式，cookie，等等。
5.3 心得体会
	在完成大作业的过程中，我收获颇丰，收获的有当今广泛应用的网页制作技术，也有面对未知领域任务的心态的提升。一篇一篇阅读老师发的论文，我逐渐有了大作业的整体架构。通过网上搜索、请教他人、看教程自学等方式，逐步完成大作业。最初就确定采用html+css+javascript来写前端，并使用bootstrap框架——这是由于C#控件不够美观且操作不便，bootstrap框架省时省力且界面美观还能快速学习并应用。而后端采用C#来编写，在实现网站预期功能时磕磕绊绊，深感全局化编程能力的薄弱和各方面知识积累的不足。希望在今后的学习中能弥补薄弱与不足之处，加油！
6、参考文献和资料
https://www.html.cn/
https://www.runoob.com/
https://getbootstrap.com/
主要参考了这几个网站😂
其它的就是百度零零碎碎搜一些东西
